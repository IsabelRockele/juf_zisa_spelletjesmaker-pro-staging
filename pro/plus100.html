<!DOCTYPE html>
<html lang="nl">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <base href="/juf_zisa_spelletjesmaker-pro-staging/pro/">
  <title>Hulpschema +</title>
  <link rel="stylesheet" href="../hulpschema.css">
</head>
<body>
  <h1>Hulpschema +</h1>

  <div class="content-wrapper">
    <div id="sidebar">
      <button onclick="window.location.href='./app.html'" class="knop terug">Terug</button>
      <button id="reset" class="knop reset">Opnieuw</button>
      <button onclick="window.location.href='./min100.html'" class="knop wissel">Wisselen naar -</button>
    </div>

    <div id="main">
      <div id="toolbar">
        <button id="blokjes">Blokjes</button>
        <button id="schijfjes">Schijfjes</button>
        <div class="tool geel-blok" draggable="true" id="kubus" style="display: none;"></div>
        <div class="tool staaf-groen" draggable="true" id="staaf" style="display: none;">
          <div class="verdeling">
            <div class="lijn" style="left: 20px;"></div><div class="lijn" style="left: 40px;"></div>
            <div class="lijn" style="left: 60px;"></div><div class="lijn" style="left: 80px;"></div>
            <div class="lijn" style="left: 100px;"></div><div class="lijn" style="left: 120px;"></div>
            <div class="lijn" style="left: 140px;"></div><div class="lijn" style="left: 160px;"></div>
            <div class="lijn" style="left: 180px;"></div>
          </div>
        </div>
        <div class="tool schijf geel" draggable="true" id="schijf-geel" style="display: none;"><span>1</span></div>
        <div class="tool schijf groen" draggable="true" id="schijf-groen" style="display: none;"><span>10</span></div>
      </div>

      <div id="schema" style="display: block;">
        <div class="schema-header">
          <div class="label-t">T</div>
          <div class="label-e">E</div>
        </div>
        <div class="schema-light">
          <div class="light-t"></div>
          <div class="light-e"></div>
        </div>
        <div class="schema-body">
          <div class="vak wit"></div>
          <div class="vak wit">
            <div class="doel-vak">
              <svg class="svg-pijl" viewBox="0 0 100 100">
                <defs>
                  <marker id="arrowhead" markerWidth="10" markerHeight="7"
                          refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#0077cc"/>
                  </marker>
                </defs>
                <line x1="95" y1="95" x2="10" y2="10" stroke="#0077cc" stroke-width="5" marker-end="url(#arrowhead)" />
              </svg>
              <div class="cirkelrij">
                <div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div>
              </div>
              <div class="cirkelrij">
                <div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div><div class="cirkel"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="schema-body">
          <div class="vak wit"></div>
          <div class="vak wit"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Kidmode script (robust) -->
<script>
(function(){
  const qp = new URLSearchParams(location.search);
  const isKid = qp.get('kid') === '1';
  if (!isKid) return;

  // Markeer kidmodus (handig als je later iets wil verbergen via CSS)
  document.documentElement.classList.add('kidmode');

  // Doel: altijd terug naar de kind-startpagina
  const target = './hulpschema-kid.html';
  const range = qp.get('range') || '100';
  const targetUrl = `${target}?range=${range}`;

  // 1) Herleid expliciet de bekende Terug-knop (button.knop.terug)
  document.querySelectorAll('button.knop.terug, .knop.terug, #sidebar .knop.terug').forEach(btn => {
    // Verwijder inline onclick en zet onze eigen handler eroverheen
    btn.removeAttribute('onclick');
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopImmediatePropagation();
      window.location.href = targetUrl;
      return false;
    }, { capture: true });
  });

  // 2) Fallback: alle elementen met onclick die naar app/keuze sturen, overschrijven
  document.querySelectorAll('[onclick]').forEach(el => {
    const val = el.getAttribute('onclick') || '';
    if (/app\.html|keuze-?hulpschema\.html/i.test(val)) {
      el.removeAttribute('onclick');
      el.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopImmediatePropagation();
        window.location.href = targetUrl;
        return false;
      }, { capture: true });
    }
  });

  // 3) Alle <a href="..."> naar app/keuze herschrijven
  document.querySelectorAll('a[href]').forEach(a => {
    const href = a.getAttribute('href') || '';
    if (/app\.html|keuze-?hulpschema\.html/i.test(href)) {
      a.setAttribute('href', targetUrl);
      // extra zekerheid: ook klik kapen
      a.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopImmediatePropagation();
        window.location.href = targetUrl;
        return false;
      }, { capture: true });
    }
  });
})();
</script>

  <!-- PRO scripts -->
  <script src="./js/device-id.js"></script>
  <script type="module" src="./js/guard.js"></script>
  <script src="../hulpschema.js"></script>
</body>
</html>

